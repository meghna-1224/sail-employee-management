{% extends "accounts/base.html" %}
{% block content %}

<div class="hr-profile-card" style="border:1px solid #ddd; padding:15px; border-radius:8px; background:#f9f9f9; margin-bottom:20px;">
  <h2>Welcome, {{ profile.user.first_name }} {{ profile.user.last_name }} ({{ profile.get_hr_role_display }})</h2>
  <p><strong>Username:</strong> {{ profile.user.username }}</p>
  <p><strong>Email:</strong> {{ profile.user.email }}</p>
  <p><strong>Contact Phone:</strong> {{ profile.contact_phone }}</p>
  <p><strong>Department:</strong> {{ profile.department_name }}</p>
</div>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
  </div>



  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Training Programs</h4>
    <a href="{% url 'add_training_program' %}" class="btn btn-success">
      ➕ Add Training Program
    </a>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Title</th>
          <th>Trainer</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Venue</th>
        </tr>
      </thead>
      <tbody>
        {% for program in programs %}
        <tr>
          <td>{{ program.title }}</td>
          <td>{{ program.trainer }}</td>
          <td>{{ program.start_date }}</td>
          <td>{{ program.end_date }}</td>
          <td>{{ program.venue }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5">No training programs yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-3 mt-5">
    <h4>Employee Training Records</h4>
    <a href="{% url 'assign_employee_training' %}" class="btn btn-primary">
      ➕ Assign Employee to Training
    </a>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Employee</th>
          <th>Training Program</th>
          <th>Status</th>
          <th>Attendance</th>
        </tr>
      </thead>
      <tbody>
        {% for record in records %}
        <tr>
          <td>{{ record.employee.user.get_full_name }}</td>
          <td>{{ record.training_program.title }}</td>
          <td>{{ record.status }}</td>
          <td>{% if record.attendance %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</td>
        </tr>
        {% empty %}
        <tr><td colspan="4">No training records yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
